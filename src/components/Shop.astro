---
// Accepter siteUrl en tant que propriété
const { siteUrl } = Astro.props;
const products = [
  {
    id: "album-premier",
    name: "Album Aujo",
    price: 25.00,
    description: "Album physique avec livret de paroles",
    image: "https://res.cloudinary.com/dxyvj8rka/image/upload/f_auto,q_auto/v1/Aujo/a7ith5ihfedughm7txyc"
  },
  {
    id: "t-shirt-tour",
    name: "T-shirt Tournée",
    price: 24.99,
    description: "T-shirt officiel de la tournée 2023",
    image: "/images/tshirt.jpg"
  },
  {
    id: "tote-bag",
    name: "Tote Bag",
    price: 12.99,
    description: "Sac en toile avec design exclusif",
    image: "/images/totebag.jpg"
  },
  {
    id: "poster-signature",
    name: "Poster dédicacé",
    price: 19.99,
    description: "Poster A3 avec signature authentique",
    image: "/images/poster.jpg"
  }
];

// Configuration de base
const baseUrl = import.meta.env.PROD 
  ? "https://www.aujo.ca/boutique" 
  : "http://localhost:3000/boutique";
---

<!-- Style spécifique à la boutique -->
<style>
  .product-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 2.5rem;
  }
  
  .product-card {
    display: flex;
    flex-direction: column;
    background-color: #ffffff;
    transition: transform 0.3s ease;
  }
  
  .product-card:hover {
    transform: translateY(-5px);
  }
  
  .product-image {
    aspect-ratio: 1 / 1;
    width: 100%;
    object-fit: cover;
    margin-bottom: 1rem;
  }
  
  .product-name {
    font-size: 1.2rem;
    font-weight: 500;
    margin-bottom: 0.5rem;
  }
  
  .product-description {
    font-size: 0.9rem;
    color: #6b7280;
    margin-bottom: 1rem;
  }
  
  .product-price {
    font-size: 1.25rem;
    font-weight: 600;
    margin-bottom: 1.5rem;
  }
  
  .add-to-cart {
    background-color: #295135; /* Vert du design original */
    color: white;
    padding: 0.5rem 1rem;
    border: none;
    border-radius: 0.25rem;
    font-size: 0.9rem;
    cursor: pointer;
    transition: background-color 0.2s ease;
    width: 100%;
  }
  
  .add-to-cart:hover {
    background-color: #1e3b27; /* Vert plus foncé */
  }
  
  .price-cart-row {
    display: flex;
    flex-direction: column;
    margin-top: auto;
  }
</style>

<div class="product-grid">
  {products.map((product) => (
    <div class="product-card">
      <img 
        src={product.image} 
        alt={product.name} 
        class="product-image"
        onerror="this.src='/images/placeholder.jpg'; this.onerror=null;"
      />
      <div class="product-content">
        <h3 class="product-name">{product.name}</h3>
        <p class="product-description">{product.description}</p>
        <div class="price-cart-row">
          <span class="product-price">{product.price.toFixed(2)} $</span>
          <button
            class="snipcart-add-item add-to-cart"
            data-item-id={product.id}
            data-item-name={product.name}
            data-item-price={product.price}
            data-item-url={siteUrl}
            data-item-image={product.image}
          >
            Ajouter au panier
          </button>
        </div>
      </div>
    </div>
  ))}
</div> 